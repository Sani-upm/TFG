<html lang="es-ES"><head>




<title>Portal del Cliente - Mis Facturas</title>
<meta charset="UTF-8">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<meta name="description" content="Bienvenido al Portal del Cliente de Mercadona. Puede gestionar sus facturas electrónicas o en formato PDF.">
<meta name="author" content="Mercadona">
<meta name="keywords" content="Mercadona, Portal del Cliente, Factura online, Consulta de facturas, Factura mensual">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="/pclie/css/bootstrap.css">
<link rel="stylesheet" href="/pclie/css/bootstrap-datepicker.css">
<link rel="stylesheet" href="/pclie/css/datatables.css">
<link rel="stylesheet" href="/pclie/css/jquery.scrolling-tabs.css">
<link rel="stylesheet" href="/pclie/css/styles.css?v=1.4">	

</head>
<body style="padding-top: 88.9766px;">
	

<script src="/pclie/js/jquery.js"></script>
<script src="/pclie/js/jquery.validate.js"></script>
<script src="/pclie/js/jquery.scrolling-tabs.min.js"></script>
<script src="/pclie/js/bootstrap.min.js"></script>
<script src="/pclie/js/bootstrap-datepicker.js"></script>
<script src="/pclie/js/locales/bootstrap-datepicker.es.js"></script>
<script src="/pclie/js/datatables.min.js"></script>
<script src="/pclie/js/moment.min.js"></script>
<script src="/pclie/js/datetime-moment.js"></script>
<script src="/pclie/js/utilidades.js"></script>
<script src="/pclie/js/chart.min.js"></script>
<script src="/pclie/js/chartjs-plugin-datalabels.js"></script>

	










	<header id="header" class="header header__home">
	    <div style="display:none">
	    	<form id="callMisFacturasMenu" action="/pclie/web/op.htm" method="post">
	    		<input type="hidden" name="operation" value="pclie.flow.ri.misFacturas">
	    		
	    	</form>
	    	
	    </div>
	    
		<div class="header__wrapper">
			
			<h1 class="header__icon">
				<a href="/pclie/web/op.htm?operation=pclie.flow.ri.home">
					<img src="/pclie/assets/svg/logo-mercadona-min.svg" alt="Mercadona">
				</a>
			</h1>
			<a class="header__title" href="/pclie/web/op.htm?operation=pclie.flow.ri.home">
				Portal facturas cliente
			</a>
			<div id="btnMenu" class="header__menu pointer">
				<i class="icon-menu"></i>
			</div>
			<div class="header__links">
				<div class="header__links-link">                    
					
					<a id="btnSolicitudFactura" class="btn-link" href="/pclie/web/op.htm?operation=pclie.flow.ri.solicitudFactura">
						<i class="icon-request-bills">
							<span class="path1"></span><span class="path2"></span><span class="path3"></span><span class="path4"></span>
						</i>
						<span>
							Solicitar nueva factura
						</span>
					</a>
					
					
					         
					<!--  <a id="btnMisFacturas" class="btn-link" href="/pclie/web/op.htm?operation=pclie.flow.ri.misFacturas"> -->
					<a id="btnMisFacturasMenu" class="btn-link active" href="#">
						<i class="icon-bills">
							<span class="path1"></span><span class="path2"></span><span class="path3"></span><span class="path4"></span><span class="path5"></span><span class="path6"></span>
						</i>
						<span>
							Facturas ya solicitadas
						</span>
					</a>
					
					
					<a id="btnMisDatos" class="btn-link" href="/pclie/web/op.htm?operation=pclie.flow.ri.misDatosFactura">
						<i class="icon-data">
							<span class="path1"></span><span class="path2"></span></i>
						<span>
							Mis datos
						</span>
					</a>
				</div>
				<div class="header__links-lang">
				<a id="btnLang" class="btn-link" href="javascript:;"> 
					<span> Español</span> 
					<i class="icon-arrow-down"></i>
				</a>
				<ul id="listLang" class="header__lang">
						
							<li class="header__lang-item">
								<button type="button" class="header__lang-button" data-lang="ca_ES">
									Català
								</button>
							</li>
							
							<li class="header__lang-item">
								<button type="button" class="header__lang-button" data-lang="en_EN">
									English
								</button>
							</li>
							
							<li class="header__lang-item">
								<button type="button" class="header__lang-button" data-lang="es_ES">
									Español
								</button>
							</li>
							
							<li class="header__lang-item">
								<button type="button" class="header__lang-button" data-lang="eu_ES">
									Euskara
								</button>
							</li>
							
							<li class="header__lang-item">
								<button type="button" class="header__lang-button" data-lang="gl_ES">
									Galego
								</button>
							</li>
							
							<li class="header__lang-item">
								<button type="button" class="header__lang-button" data-lang="pt_PT">
									Português
								</button>
							</li>
							
							<li class="header__lang-item">
								<button type="button" class="header__lang-button" data-lang="es_ES_va">
									Valencià
								</button>
							</li>
							
					</ul>
				</div>
				<div class="header__links-logout">
					<a class="btn-link" href="/pclie/web/op.htm?operation=pclie.flow.ri.logOut">
						Salir
					</a>
				</div>
			</div>
		</div>
	</header>

	<div id="menu" class="menu d-block d-xl-none">
		<div class="menu__overlay"></div>
		<div class="menu__container">
			<div class="menu__header">
				<i id="btnCloseMenu" class="icon-close pointer"></i>
				<span class="menu__title">
					Portal facturas cliente
				</span>
			</div>
			<div class="menu__body">
				<div class="menu__block">
					<ul>
						
						<li>
							<a class="menu__link" href="/pclie/web/op.htm?operation=pclie.flow.ri.solicitudFactura">
								<i class="icon-request-bills-menu">
									<span class="path1"></span><span class="path2"></span><span class="path3"></span><span class="path4"></span>
								</i>
								<span>
									Solicitar nueva factura
								</span>
							</a>
						</li>
						
						<li>
							<a class="menu__link" href="/pclie/web/op.htm?operation=pclie.flow.ri.misFacturas"> 
								<i class="icon-bills-menu">
									<span class="path1"></span><span class="path2"></span><span class="path3"></span><span class="path4"></span><span class="path5"></span><span class="path6"></span>
								</i>
								<span>Facturas ya solicitadas</span>
							</a>
						</li>
						<li>
							<a class="menu__link" href="/pclie/web/op.htm?operation=pclie.flow.ri.misDatosFactura"> 
								<i class="icon-data-menu">
									<span class="path1"></span><span class="path2"></span><span class="path3"></span>
								</i>
								<span>Mis datos</span>
							</a>
						</li>
					</ul>
				</div>
				<div class="menu__block">
					<div id="accordionMenu" class="accordion accordion-flush">
						<div class="accordion-item">
							<h2 class="accordion-header" id="flush-headingOne">
								<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">Español</button>
							</h2>
							<div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionMenu">
								<div class="accordion-body">
									
									<button type="button" class="menu__lang-button" data-lang="ca_ES">Català</button>
									
									<button type="button" class="menu__lang-button" data-lang="en_EN">English</button>
									
									<button type="button" class="menu__lang-button" data-lang="es_ES">Español</button>
									
									<button type="button" class="menu__lang-button" data-lang="eu_ES">Euskara</button>
									
									<button type="button" class="menu__lang-button" data-lang="gl_ES">Galego</button>
									
									<button type="button" class="menu__lang-button" data-lang="pt_PT">Português</button>
									
									<button type="button" class="menu__lang-button" data-lang="es_ES_va">Valencià</button>
									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="menu__footer">
				<a class="menu__link" href="/pclie/web/op.htm?operation=pclie.flow.ri.logOut">
					Salir
				</a>
			</div>
		</div>
	</div>
	
	
	<!-- Acciones del menu  -->
    <script>
    $('#btnMisFacturasMenu').on('click', function() {
    	//habría que buscar el nombre seleccionado, cargar en input y hacer submit
    	$('#callMisFacturasMenu').trigger('submit');
    });  
    </script>
	
	










<script>
	function setCookie(cname, cvalue, exdays) {
		var d = new Date();
		d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
		var expires = "expires=" + d.toUTCString();
		document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
	}
</script>



<div id="cookies" class="cookies" style="display:none">
    <div class="cookies__wrapper">
        <div class="cookies__info-wrapper">
            <div class="cookies__icon">
                <img src="/pclie/assets/svg/cookies.svg" alt="Cookies">
            </div>
            <div class="cookies__info">
                <p>Este sitio web utiliza cookies propias con finalidad técnica, no recoge ni trata datos personales de los usuarios de la web. Para continuar navegando pulse ACEPTAR.</p>
            </div>
        </div>
        <div class="cookies__links">
            <a class="btn-link" href="/pclie/web/op.htm?operation=pclie.flow.ri.cookies" target="_blank">
            	Más información
            </a>
            <button id="btnCookies" type="button" class="btn btn-primary" onclick="setCookie('allowCookie',true,365);">ACEPTAR</button>
        </div>
    </div>
</div>
	<div>



	<script>
		let literalPrimerTrimestre = '1º Trimestre';
		let literalSegundoTrimestre = '2º Trimestre';
		let literalTercerTrimestre = '3º Trimestre';
		let literalCuartoTrimestre = '4º Trimestre';
		let literalTotal = 'Total';
	</script>
	
	<form id="myBills_cambiaIdioma" method="post" action="/pclie/web/op.htm">
		<input type="hidden" name="operation" id="operation" value="pclie.flow.ri.misFacturas.selecEnt">
		<input type="hidden" name="fwk.locale" id="idioma" value="">
		<input type="hidden" name="billsFiscalEntitySelect" value="EB47785811">
		<input type="hidden" name="dateFrom" value="22/04/2025">
		<input type="hidden" name="dateTo" value="22/05/2025">
		<input type="hidden" name="codError" value="1">
	</form>
	<script>
		$('#listLang button, #accordionMenu .menu__lang-button').on('click', function() {
		    const langData = $(this).attr('data-lang');
		    $('#myBills_cambiaIdioma').find('#idioma').val(langData);
		    $('#myBills_cambiaIdioma').trigger('submit');
		});
		
		$('.header__links-link .btn-link').removeClass('active');
		$('#btnMisFacturasMenu').addClass('active');
	</script>
	

	<div style="display:none">
		<form id="showPDFFrm" action="/pclie/web/op.htm">
			<input type="hidden" name="operation" value="pclie.flow.ri.mostrarPDF">
			<input type="hidden" name="anyoFact" id="anyoFact">
			<input type="hidden" name="centroFact" id="centroFact">
			<input type="hidden" name="numFact" id="numFact">
			<input type="hidden" name="tipoFact" id="tipoFact">
			<input type="hidden" name="tipoImp" id="tipoImp">
			<input type="hidden" name="fechaFact" id="fechaFact">
			<input type="hidden" name="mensual" id="mensual">
			<input type="hidden" name="billsFiscalEntitySelect" id="billsFiscalEntitySelect">
			<input type="hidden" name="dateFrom" id="dateFrom">
			<input type="hidden" name="dateTo" id="dateTo">
		</form>
	</div>


	
	
		<!--  Mostrar mensaje de error de NO impresión -->
	
	
	
	<div style="display:none">
		<form id="showCSVFrm" action="/pclie/web/op.htm">
			<input type="hidden" name="operation" value="pclie.flow.ri.mostrarCSVlistaFactura">
			<input type="hidden" name="billsFiscalEntitySelect" id="billsFiscalEntitySelect">
			<input type="hidden" name="dateFrom" id="dateFrom">
			<input type="hidden" name="dateTo" id="dateTo">
		</form>
	</div>
			

    <section class="dashboard">
        












        <!-- BOTON HELP -->
        <button id="btnHelp" type="button" class="btn btn-primary btn-fixed">
            <span>AYUDA</span>
            <i class="icon-help"></i>
        </button>

        <!-- MODAL HELP -->

        <div id="modalHelp" class="modal-help">

            <div class="help-header">
                <div class="help-header-info">
                    <p class="help-header-phone">¿En qué podemos ayudarte?</p>
                    <p> </p>
                </div>
                <div id="closeModalHelp" class="help-header-close pointer">
                    <i class="icon-close"></i>
                </div>
            </div>

            <div id="accordionHelp" class="accordion accordion-flush">
            	
                
				<div class="accordion-item">
                    <h2 class="accordion-header" id="flush-heading1">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse1" aria-expanded="false" aria-controls="flush-collapse1">
                        	¿Cómo gestionar mis facturas?
                        </button>
                    </h2>
                    <div id="flush-collapse1" class="accordion-collapse collapse" aria-labelledby="flush-heading1" data-bs-parent="#accordionHelp">
                        <div class="accordion-body">
                        	<p>Desde la opción "Ver mis facturas" podrás visualizar y/o descargar tus facturas. Pulsando sobre la factura tendrás la opción de ver tu factura en este Portal o de descargártela y guardarla en tu dispositivo.</p>
                        	
				
				
				<p>Por defecto se te mostrarán las facturas que hayas solicitado en el último mes, si quieres visualizar más deberás cambiar el rango de fechas en el calendario. </p>
				
				
				
				<p>Si la factura la solicitaste en caja, aquí podrás consultar tantas veces como quieras los duplicados de esa factura, siendo la original la factura en papel que obtuviste en tienda.</p>
				
				
				
				<p>Si la factura la solicitaste a través del Portal, la factura original estará disponible la primera vez que la abras (guárdala en tu dispositivo si necesitas consultarla en más ocasiones). Las demás veces que abras la factura serán duplicados.</p>
				
				
                
                		</div>
                    </div>
                </div>
                
                
                
				<div class="accordion-item">
                    <h2 class="accordion-header" id="flush-heading5">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse5" aria-expanded="false" aria-controls="flush-collapse5">
                        	¿Por qué al solicitar una factura me sale en la pestaña de "Peticiones erróneas"?
                        </button>
                    </h2>
                    <div id="flush-collapse5" class="accordion-collapse collapse" aria-labelledby="flush-heading5" data-bs-parent="#accordionHelp">
                        <div class="accordion-body">
                        	<p>Has introducido de manera incorrecta alguno de los datos de tu ticket de compra necesarios para la emisión de la factura, deberás revisar los datos introducidos y solicitar la factura de nuevo. </p>
                        	
				
				
				<p>La petición errónea se borrará de manera automática pasados 1 mes. </p>
				
				
                
                		</div>
                    </div>
                </div>
                
                
                
				<div class="accordion-item">
                    <h2 class="accordion-header" id="flush-heading7">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse7" aria-expanded="false" aria-controls="flush-collapse7">
                        	¿Por qué los tickets me aparecen en la pestaña de "Tickets pendientes"?
                        </button>
                    </h2>
                    <div id="flush-collapse7" class="accordion-collapse collapse" aria-labelledby="flush-heading7" data-bs-parent="#accordionHelp">
                        <div class="accordion-body">
                        	<p>Si tienes facturación mensual, todos los tickets del mes en curso aparecerán en esta pestaña hasta el día 01 del mes siguiente que recibirás la factura con el detalle de todos estos tickets.</p>
                        	
				
				
				<p>Si tienes facturación por compra puede ser que se esté tramitando tu solicitud de factura.</p>
				
				
                
                		</div>
                    </div>
                </div>
                
                
                
				<div class="accordion-item">
                    <h2 class="accordion-header" id="flush-heading9">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse9" aria-expanded="false" aria-controls="flush-collapse9">
                        	¿Cómo consulto el total anual facturado?
                        </button>
                    </h2>
                    <div id="flush-collapse9" class="accordion-collapse collapse" aria-labelledby="flush-heading9" data-bs-parent="#accordionHelp">
                        <div class="accordion-body">
                        	<p>Desde el apartado “Ver mis facturas” podrás consultar tanto el total facturado durante el año, así como exportarte en Excel el listado de facturas dentro de las fechas que desees.</p><ul style="list-style: disc;padding-left: 2rem;font-size: 1.6rem;margin-top: 1rem;margin-bottom: 2.4rem;"><li style="margin-bottom: 1rem;">Para consultar el total anual facturado debes:</li></ul><p></p>
                        	
				
				
				<p>- Elegir el año que quieres consultar en el desplegable que hay al lado de “Total anual facturado”, por defecto aparece el año en curso. </p><p class="al__text">   - En el gráfico aparecerá el total de tus facturas por trimestres.</p><p class="al__text">  - Debajo del gráfico se muestra el importe total anual de tus facturas</p><p></p>
				
				
				
				<p></p><ul style="list-style: disc;padding-left: 2rem;font-size: 1.6rem;margin-top: 1rem;margin-bottom: 2.4rem;"><li style="margin-bottom: 1rem;">Para exportar el listado de facturas en Excel</li></ul><p></p>
				
				
				
				<p>- Elige el rango de fechas que quieres exportar indicando las fechas en las casillas “Desde” y “Hasta”. </p><p class="al__text">    - Pulsa sobre la opción “Exportar” que verás debajo del listado de facturas.</p><p></p>
				
				        
                      
                    	</div>
                    </div>
                </div>         
                             
                
                                                           
            </div>
        </div>
        
		
        <article class="dashboard__container">
        	
			<a class="btn-link btn-back" href="/pclie/web/op.htm?operation=pclie.flow.ri.home">
				<i class="icon-arrow-back"></i> 
				<span>Volver</span>
			</a>

            <h2 class="dashboard__subtitle">Mis Facturas</h2>

            <div class="dashboard__select">
                <div class="col-12 margin-select">
                    <form id="formBillsEntitySelect" action="" method="post">
                    	<input type="hidden" name="operation" value="pclie.flow.ri.misFacturas.selecEnt">
                    	
                        <label for="billsFiscalEntitySelect" class="form-label">
							Facturas a nombre de							
						</label>
                        <div class="form-select-icon">
                            <select id="billsFiscalEntitySelect" name="billsFiscalEntitySelect" class="form-select">
                                <option value="-1">Selecciona un perfil de facturación</option>
								
								<option value="EB47785811#KAMEN 99, S.L." selected="">KAMEN 99, S.L.</option>
																
			
                            </select>
                            <i class="icon-arrow-down pos-right"></i>
                        </div>


                    </form>
                </div>
            </div>
			<!-- Obtener el valor del número de filas en la base de datos y almacenarlo en el atributo value -->
            <input id="numberRowsHidden" type="hidden" value="9">
            <!-- Obtener los valores que se usan para la gráfica y almacenarlos en el atributo value -->
            <input id="currentYearHidden" type="hidden" value="2025">
            <input id="currentTotalHidden" type="hidden" value="2.801,09">
           	<input id="currentYearFirstTrimHidden" type="hidden" value="2.028,50">
            <input id="currentYearSecondTrimHidden" type="hidden" value="772,59">
            <input id="currentYearThirdTrimHidden" type="hidden" value="0,00">
            <input id="currentYearFourthTrimHidden" type="hidden" value="0,00">
            
            <input id="lastYearHidden" type="hidden" value="2024">
            <input id="lastTotalHidden" type="hidden" value="10.533,15">
            <input id="lastYearFirstTrimHidden" type="hidden" value="2.586,22">
            <input id="lastYearSecondTrimHidden" type="hidden" value="2.714,21">
            <input id="lastYearThirdTrimHidden" type="hidden" value="2.905,52">
            <input id="lastYearFourthTrimHidden" type="hidden" value="2.327,20">
                        
            <div class="dashboard__datas">
                <div class="dashboard__tabs">
                    <nav>
                        <ul class="nav nav-tabs nav-scroll" id="navBills" role="tablist">
                            <li class="nav-item">
                                <button class="nav-link active" id="nav-issued-bills-tab" data-bs-toggle="tab" data-bs-target="#nav-issued-bills" type="button" role="tab" aria-controls="nav-issued-bills" aria-selected="true">
                                	Facturas emitidas
                                </button>
                            </li>
                            <li class="nav-item">
								<button class="nav-link" id="nav-pending-bills-tab" data-bs-toggle="tab" data-bs-target="#nav-pending-bills" type="button" role="tab" aria-controls="nav-pending-bills" aria-selected="false">
									Tickets pendientes
								</button>
                            </li>
                            <li class="nav-item">
                                <button class="nav-link" id="nav-error-bills-tab" data-bs-toggle="tab" data-bs-target="#nav-error-bills" type="button" role="tab" aria-controls="nav-error-bills" aria-selected="false">
									Peticiones erróneas
								</button>
                            </li>
                        </ul>
                    </nav>
                    <div class="tab-content" id="nav-tabContent">
                        <div class="tab-pane fade show active" id="nav-issued-bills" role="tabpanel" aria-labelledby="nav-issued-bills-tab">
                        
                            <form class="form needs-validation" id="filterByDateForm" novalidate="" method="post" action="/pclie/web/op.htm">
                            	<input type="hidden" name="billsFiscalEntitySelect" value="EB47785811">
                            	<input type="hidden" name="operation" value="pclie.flow.ri.misFacturas.selecEnt">
                                <div class="row">
                                    <div class="col-6 col-md-4">
                                        <label for="dateFrom" class="form-label">Desde</label>
                                        <div class="input-group date date-from">
                                            <input type="text" class="form-control datepicker" name="dateFrom" id="dateFrom" placeholder="dd/mm/aa" required="" autocomplete="off" value="22/04/2025">
                                            <span class="input-group-text">
                                                <i class="icon-calendar-input pos-right pointer"></i>
                                            </span>
                                            <div class="invalid-tooltip">El campo es obligatorio</div>
                                        </div>
                                    </div>
                                    <div class="col-6 col-md-4">
                                        <label for="dateTo" class="form-label">
                                        	Hasta                                        	
                                        </label>
                                        <div class="input-group date date-to">
                                            <input type="text" class="form-control datepicker" name="dateTo" id="dateTo" placeholder="dd/mm/aa" required="" autocomplete="off" value="22/05/2025">
                                            <span class="input-group-text">
                                                <i class="icon-calendar-input pos-right pointer"></i>
                                            </span>
                                            <div class="invalid-tooltip">El campo es obligatorio</div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-4">
                                        <div class="form-btn d-grid d-md-block">
                                            <button type="submit" class="btn btn-primary">
                                            	BUSCAR FACTURAS                                            	
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                            <div class="dashboard__table">
                               	<div id="tableIssuedBills_wrapper" class="dataTables_wrapper dt-bootstrap5 no-footer"><div class="row"><div class="col-sm-12 col-md-6"></div><div class="col-sm-12 col-md-6"></div></div><div class="row"><div class="col-sm-12"><table id="tableIssuedBills" class="table responsive dataTable no-footer" role="grid" aria-describedby="tableIssuedBills_info" style="width: 801px;">
                                    <thead>
                                        <tr role="row"><th class="all sorting sorting_desc" scope="col" tabindex="0" aria-controls="tableIssuedBills" rowspan="1" colspan="1" aria-sort="descending" aria-label="
                                            	Fecha factura
											: Activar para ordenar la columna de manera ascendente" style="width: 191px;"><span>
                                            	Fecha factura
											</span></th><th data-orderable="false" class="min-tablet-p sorting_disabled" scope="col" rowspan="1" colspan="1" aria-label="
                                            	Factura simplificada
                                            " style="width: 229px;"><span>
                                            	Factura simplificada
                                            </span></th><th class="all amount sorting" scope="col" tabindex="0" aria-controls="tableIssuedBills" rowspan="1" colspan="1" aria-label="
                                            	Importe                                            	
                                            : Activar para ordenar la columna de manera ascendente" style="width: 130px;"><span>
                                            	Importe                                            	
                                            </span></th><th data-orderable="false" class="all col-download sorting_disabled" scope="col" rowspan="1" colspan="1" aria-label="
												Descarga
											" style="width: 75px;">
												<span>Descarga</span>
											</th></tr>
                                    </thead>
                                    <tbody>
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    
                                        
                                    
                                    <tr class="odd">
                                            <td class="timestamp sorting_1" data-order="1745877600"><span class="date">29/04/2025</span></td>
                                            <td><span>3274-017-00138373</span></td>
                                            <td class="amount"><span>21,38 €</span></td>
                                            <td class="col-right">
                                                <a href="javascript:doShowPdf('2025','3274','1932388','A','V','29/04/2025','N')" class="btn-download" download="">
                                                    <i class="icon-download"></i>
                                                </a>
                                            </td>
                                        </tr><tr class="even">
                                            <td class="timestamp sorting_1" data-order="1745877600"><span class="date">29/04/2025</span></td>
                                            <td><span>3274-016-00263073</span></td>
                                            <td class="amount"><span>7,35 €</span></td>
                                            <td class="col-right">
                                                <a href="javascript:doShowPdf('2025','3274','1932308','A','V','29/04/2025','N')" class="btn-download" download="">
                                                    <i class="icon-download"></i>
                                                </a>
                                            </td>
                                        </tr><tr class="odd">
                                            <td class="timestamp sorting_1" data-order="1745877600"><span class="date">29/04/2025</span></td>
                                            <td><span>3274-017-00138178</span></td>
                                            <td class="amount"><span>20,73 €</span></td>
                                            <td class="col-right">
                                                <a href="javascript:doShowPdf('2025','3274','1932262','A','V','29/04/2025','N')" class="btn-download" download="">
                                                    <i class="icon-download"></i>
                                                </a>
                                            </td>
                                        </tr><tr class="even">
                                            <td class="timestamp sorting_1" data-order="1745877600"><span class="date">29/04/2025</span></td>
                                            <td><span>3274-017-00138000</span></td>
                                            <td class="amount"><span>4,21 €</span></td>
                                            <td class="col-right">
                                                <a href="javascript:doShowPdf('2025','3274','1932208','A','V','29/04/2025','N')" class="btn-download" download="">
                                                    <i class="icon-download"></i>
                                                </a>
                                            </td>
                                        </tr><tr class="odd">
                                            <td class="timestamp sorting_1" data-order="1745877600"><span class="date">29/04/2025</span></td>
                                            <td><span>3274-010-00470606</span></td>
                                            <td class="amount"><span>10,20 €</span></td>
                                            <td class="col-right">
                                                <a href="javascript:doShowPdf('2025','3274','1932164','A','V','29/04/2025','N')" class="btn-download" download="">
                                                    <i class="icon-download"></i>
                                                </a>
                                            </td>
                                        </tr><tr class="even">
                                            <td class="timestamp sorting_1" data-order="1745877600"><span class="date">29/04/2025</span></td>
                                            <td><span>4535-010-00796499</span></td>
                                            <td class="amount"><span>81,01 €</span></td>
                                            <td class="col-right">
                                                <a href="javascript:doShowPdf('2025','4535','1932066','A','V','29/04/2025','N')" class="btn-download" download="">
                                                    <i class="icon-download"></i>
                                                </a>
                                            </td>
                                        </tr><tr class="odd">
                                            <td class="timestamp sorting_1" data-order="1745877600"><span class="date">29/04/2025</span></td>
                                            <td><span>3274-016-00263446</span></td>
                                            <td class="amount"><span>42,41 €</span></td>
                                            <td class="col-right">
                                                <a href="javascript:doShowPdf('2025','3274','1931962','A','V','29/04/2025','N')" class="btn-download" download="">
                                                    <i class="icon-download"></i>
                                                </a>
                                            </td>
                                        </tr><tr class="even">
                                            <td class="timestamp sorting_1" data-order="1745877600"><span class="date">29/04/2025</span></td>
                                            <td><span>4735-011-00122485</span></td>
                                            <td class="amount"><span>47,31 €</span></td>
                                            <td class="col-right">
                                                <a href="javascript:doShowPdf('2025','4735','1930953','A','V','29/04/2025','N')" class="btn-download" download="">
                                                    <i class="icon-download"></i>
                                                </a>
                                            </td>
                                        </tr><tr class="odd">
                                            <td class="timestamp sorting_1" data-order="1745532000"><span class="date">25/04/2025</span></td>
                                            <td><span>3274-012-00156478</span></td>
                                            <td class="amount"><span>15,07 €</span></td>
                                            <td class="col-right">
                                                <a href="javascript:doShowPdf('2025','3274','1882139','A','V','25/04/2025','N')" class="btn-download" download="">
                                                    <i class="icon-download"></i>
                                                </a>
                                            </td>
                                        </tr></tbody>
                                </table></div></div><div class="row"><div class="col-sm-12 col-md-5"><div class="dataTables_info" id="tableIssuedBills_info" role="status" aria-live="polite">Mostrando del 1 al 9 de 27 registros</div></div><div class="col-sm-12 col-md-7"><div class="dataTables_paginate paging_simple_numbers" id="tableIssuedBills_paginate"><ul class="pagination"><li class="paginate_button page-item previous disabled" id="tableIssuedBills_previous"><a href="#" aria-controls="tableIssuedBills" data-dt-idx="0" tabindex="0" class="page-link">Anterior</a></li><li class="paginate_button page-item active"><a href="#" aria-controls="tableIssuedBills" data-dt-idx="1" tabindex="0" class="page-link">1</a></li><li class="paginate_button page-item "><a href="#" aria-controls="tableIssuedBills" data-dt-idx="2" tabindex="0" class="page-link">2</a></li><li class="paginate_button page-item "><a href="#" aria-controls="tableIssuedBills" data-dt-idx="3" tabindex="0" class="page-link">3</a></li><li class="paginate_button page-item next" id="tableIssuedBills_next"><a href="#" aria-controls="tableIssuedBills" data-dt-idx="4" tabindex="0" class="page-link">Siguiente</a></li></ul></div></div></div></div>
                                
                                
                                
	                                <div class="btn-export">
	                                	<a id="btnExportTable" href="javascript:doShowCSV()" class="btn-link">
		                       				<span>Exportar</span>
		                       			</a>
	                                </div>
                                
                            </div>
                        
                        </div>
                        
                        <div class="tab-pane fade" id="nav-pending-bills" role="tabpanel" aria-labelledby="nav-pending-bills-tab">
                        
                            <div class="dashboard__notice-tab">
                                <div class="notice-icon">
                                    <i class="icon-info"></i>
                                </div>
                                <div class="notice-descr">
                                    <p>Los tickets pendientes son los que se incluirán en la factura del siguiente mes o los que se están tramitando</p>
                                </div>
                            </div>
                            <div class="dashboard__table">
                                <table class="table responsive">
                                    <thead>
                                        <tr>
                                            <th class="all" scope="col"><span>
                                            	Fecha de solicitud
                                            </span></th>
                                            <th data-orderable="false" class="min-tablet-p" scope="col"><span>
                                            	Factura simplificada                                            	
                                            </span></th>
                                            <th class="all amount" scope="col"><span>Importe</span></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                    </tbody>
                                </table>
                            </div>
                        
                        
                        </div>
                        
                        <div class="tab-pane fade" id="nav-error-bills" role="tabpanel" aria-labelledby="nav-error-bills-tab">
                        
                            <div class="dashboard__notice-tab">
                                <div class="notice-icon">
                                    <i class="icon-alert"></i>
                                </div>
                                <div class="notice-descr">
                                    <p>Parece que hubo algún error al introducir los datos de tu ticket. Por favor, revísalos y solicita la factura de nuevo.​</p>
                                    
                                    <a class="btn-link text-uppercase" href="/pclie/web/op.htm?operation=pclie.flow.ri.solicitudFactura">
                                    	SOLICITAR FACTURA
                                    </a>
                                </div>
                            </div>
                            <div class="dashboard__table">
                                <table class="table responsive">
                                    <thead>
                                        <tr>
                                            <th class="all" scope="col"><span>
                                            	Fecha de solicitud                                            
                                            </span></th>
                                            <th data-orderable="false" class="min-tablet-p" scope="col"><span>
												Factura simplificada
											</span></th>
                                            <th class="all amount" scope="col"><span>Importe</span></th>
                                        </tr>
                                    </thead>
                                    <tbody>
	                                    
                                    </tbody>
                                </table>
                            </div>
                        
                        </div>
                    </div>
                    <div id="annualBillsTotal" class="tab-content tab-simple">
                    	<div class="chart-header">
                        	<div class="dashboard__subtitle">Total anual facturado</div>
                        	
                        	
                        	<div class="form-select-icon">
                                <select id="yearTrimestreSelect" class="form-select">
                                    <option value="2025" selected="">2025</option>
                                    <option value="2024">2024</option>
                                </select>
                                <i class="icon-arrow-down pos-right"></i>
                            </div>
                            
                        </div>
                        
                        <div class="dashboard__charts dashboard__charts-doughnut">
                            <div class="chart-container">
                                <canvas id="myChartDoughnut" width="522" height="600" style="display: block; box-sizing: border-box; height: 300px; width: 261px;"></canvas>
                            </div>
                            <div class="dashboard__charts-legend">
                            	<ul id="listTrimestres" class="list-trimestres">
                            		<li>
                            			<div class="label-trim">
                            				<div class="color-trim first-trim"></div>
                            				<span class="text-trim">1º Trimestre</span>
                            			</div>
                            			<span id="totalFirstTrimestre" class="total-trim text-end">2.028,50 €</span>
                            		</li>
                            		<li>
                            			<div class="label-trim">
                            				<div class="color-trim second-trim"></div>
                            				<span class="text-trim">2º Trimestre</span>
                            			</div>
                            			<span id="totalSecondTrimestre" class="total-trim text-end">772,59 €</span>
                            		</li>
                            		<li>
                            			<div class="label-trim">
                            				<div class="color-trim third-trim"></div>
                            				<span class="text-trim">3º Trimestre</span>
                            			</div>
                            			<span id="totalThirdTrimestre" class="total-trim text-end">0,00 €</span>
                            		</li>
                            		<li>
                            			<div class="label-trim">
                            				<div class="color-trim fourth-trim"></div>
                            				<span class="text-trim">4º Trimestre</span>
                            			</div>
                            			<span id="totalFourthTrimestre" class="total-trim text-end">0,00 €</span>
                            		</li>
                            	</ul>
                                <ul class="list-legend">
                                    <li>
                                        <span id="chartYearTrimestre" class="bar-year">Total 2025</span>
                                        <span id="chartTotalTrimestre" class="bar-total ms-auto">2.801,09 €</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        
                        
                        <script>
	                     	// ChartJS
	                     	const chartLastYear = $('#lastYearHidden').val();
	                     	let isChartCreated = false;
	                     	let chartYearTrimestre = null;
							let valueFirstTrim = null;
							let valueSecondTrim = null;
							let valueThirdTrim = null;
							let valueFourthTrim = null;
							let chartTrimestreTotal = null;
							 
	                     	dataChartDoughnut('current');
							
	                     	if (chartTrimestreTotal != "0,00") {
								initChartDoughnut(valueFirstTrim, valueSecondTrim, valueThirdTrim, valueFourthTrim);
								isChartCreated = true;
	                     	}
							
							$('#yearTrimestreSelect').on('change', function() {
							    const value = $(this).children(':selected').attr('value');
							
							    switch(value) {
							        case chartLastYear:
							        	dataChartDoughnut('last');
							            break;
							
							        default:
							        	dataChartDoughnut('current');
							    }
							    
							    if (isChartCreated) {
							    	myChartDoughnut.destroy();
							    	isChartCreated = false;
							    }

							    if (chartTrimestreTotal != "0,00") {
									initChartDoughnut(valueFirstTrim, valueSecondTrim, valueThirdTrim, valueFourthTrim);
									isChartCreated = true;
		                     	}
							});
							
							
							function dataChartDoughnut(yearStatus) {
								chartYearTrimestre = $('#' + yearStatus + 'YearHidden').val();
								valueFirstTrim = parseFloat($('#' + yearStatus + 'YearFirstTrimHidden').val().replace(/\./g, '').replace(/,/g, '.'));
								valueSecondTrim = parseFloat($('#' + yearStatus + 'YearSecondTrimHidden').val().replace(/\./g, '').replace(/,/g, '.'));
								valueThirdTrim = parseFloat($('#' + yearStatus + 'YearThirdTrimHidden').val().replace(/\./g, '').replace(/,/g, '.'));
								valueFourthTrim = parseFloat($('#' + yearStatus + 'YearFourthTrimHidden').val().replace(/\./g, '').replace(/,/g, '.'));
								
								chartTrimestreTotal = $('#' + yearStatus + 'TotalHidden').val();
								
								let chartFirstTrimestre = $('#' + yearStatus + 'YearFirstTrimHidden').val();
								let chartSecondTrimestre = $('#' + yearStatus + 'YearSecondTrimHidden').val();
								let chartThirdTrimestre = $('#' + yearStatus + 'YearThirdTrimHidden').val();
								let chartFourthTrimestre = $('#' + yearStatus + 'YearFourthTrimHidden').val();
								
								// Leyenda gráfica								
								$('#totalFirstTrimestre').text(chartFirstTrimestre + ' €');
								$('#totalSecondTrimestre').text(chartSecondTrimestre + ' €');
								$('#totalThirdTrimestre').text(chartThirdTrimestre + ' €');
								$('#totalFourthTrimestre').text(chartFourthTrimestre + ' €');
								
								if (chartTrimestreTotal != "0,00") {
									$('#listTrimestres').show();
								}
								else {
									$('#listTrimestres').hide();
								}
								
								$('#chartYearTrimestre').text(literalTotal + ' ' + chartYearTrimestre);
								$('#chartTotalTrimestre').text(chartTrimestreTotal + ' €');
							}
	
							
							function initChartDoughnut(valueFirstTrim, valueSecondTrim, valueThirdTrim, valueFourthTrim) {
					            // Config ChartJS Doughnut
					            const labelsDoughnut = [literalPrimerTrimestre, literalSegundoTrimestre, literalTercerTrimestre, literalCuartoTrimestre];
	
					            const dataDoughnut = {
					                labels: labelsDoughnut,
					                datasets: [{
					                    data: [valueFirstTrim, valueSecondTrim, valueThirdTrim, valueFourthTrim],
					                    backgroundColor: [
					                        'rgba(255, 99, 132, 1)',
					                        'rgba(54, 162, 235, 1)',
					                        'rgba(255, 206, 86, 1)',
					                        'rgba(75, 192, 192, 1)'
					                    ]
					                }]
					            };
	
					            const configDoughnut = {
					                type: 'doughnut',
					                plugins: [ChartDataLabels],
					                data: dataDoughnut,
					                options: {
					                    responsive: true,
					                    maintainAspectRatio: false,
					                    plugins: {
					                        title: {
					                            display: false
					                        },
					                        legend: {
					                            display: false
					                        },
					                        tooltip: {
					                            enabled: false
					                        },
					                        datalabels: {
					                        	display: function(context) {
					                                return context.dataset.data[context.dataIndex] !== 0;
					                            },
					                            align: 'center',
					                            color: '#FFFFFF',
					                            font: {
					                                size: 16
					                            },
					                            formatter: function(value, context) {
				                                	let sum = 0;
				                                	let dataArr = context.chart.data.datasets[0].data;
				                                	dataArr.map(function(data) {
				                                		return sum += data;
				                                	});
				                                	let percentage = (value*100 / sum).toFixed(1).replace(/\./g, ',') + "%";
				                                	return percentage;
				                              	}
					                        }
					                    }
					                }
					            };
	
					            myChartDoughnut = new Chart(
					                document.getElementById('myChartDoughnut'),
					                configDoughnut
					            );
					        }
                        </script>
                        
                    </div>
                </div>
            </div>
        </article>
    </section>

    <script>   

    // Datepicker
    $('.input-group.date').datepicker({
        autoclose: true,
        format: "dd/mm/yyyy",
        language: "es_ES",
        todayHighlight: true
    });
    
    

	    $('.input-group.date-from').datepicker('setDate', '22/04/2025');
	    $('.input-group.date-to').datepicker('setDate', '22/05/2025');
		
	

    $('.input-group.date').datepicker().on('hide', function(){
        const btnSubmit = $(this).closest('form').find('button');
        const inputDate = $('.input-group.date').closest('form').find('input');

        for (i = 0; i < inputDate.length; i++) {
            if (inputDate[i].type === 'text' && inputDate[i].value === '') {
                btnSubmit.attr('disabled', true);
                return false;
            }
            else {
                btnSubmit.attr('disabled', false);
            }
        }
    });

    function doShowPdf(anyo, centro, numFact, tipoFact, tipoImp, fechaFact, mensual ) {
    	$('#showPDFFrm #anyoFact').val(anyo);
    	$('#showPDFFrm #centroFact').val(centro);
    	$('#showPDFFrm #numFact').val(numFact);
    	$('#showPDFFrm #tipoFact').val(tipoFact);
    	$('#showPDFFrm #tipoImp').val(tipoImp);
    	$('#showPDFFrm #fechaFact').val(fechaFact);
    	$('#showPDFFrm #mensual').val(mensual);

    	$('#showPDFFrm #billsFiscalEntitySelect').val('EB47785811');
    	$('#showPDFFrm #dateFrom').val(
    			$('#filterByDateForm #dateFrom').val());
    	$('#showPDFFrm #dateTo').val(
    			$('#filterByDateForm #dateTo').val());
    	
    	$('#showPDFFrm').trigger('submit');
    }

    function doShowCSV( ) {

    	$('#showCSVFrm #billsFiscalEntitySelect').val('EB47785811');
    	$('#showCSVFrm #dateFrom').val(
    			$('#filterByDateForm #dateFrom').val());
    	$('#showCSVFrm #dateTo').val(
    			$('#filterByDateForm #dateTo').val());
    	
    	$('#showCSVFrm').trigger('submit');
    }
    
    
       // Con input de tipo hidden
       const numberRowsPage = parseInt($('#numberRowsHidden').val());
       // Esto es equivalente a la línea siguiente:
       // numberRowsPage = parseInt(document.getElementById('numberRowsHidden').value);

       // DataTable
       initDataTable(numberRowsPage);

       $('#navBills .nav-link').on('shown.bs.tab', function(event){
           $('.tab-pane .table').DataTable().destroy();

           initDataTable(numberRowsPage);
       });

       // DataTable
       function initDataTable(rowsPage) {
           // Establecer el timestamp de las fechas, para poder ordenarlas en la tabla Datatable
           $('.tab-pane.active .table tr').each(function() {
               let date = $(this).find('span.date').text();

               if (date != '' && date != 'undefined') {
                   let dateReverse = date.split('/').reverse().join('/');
                   let dateParse = Date.parse(dateReverse);
                   
                   $(this).find('td.timestamp').attr('data-order', dateParse/1000);
               }    
           });

           // Inicializar tabla
           const fileLang = '/pclie/js/locales/dataTables_es_ES.json';
           const table = $('.tab-pane.active .table').DataTable({
        	   'language': {
        		   'decimal': ',',
        		   'url': fileLang 
        		},
               'initComplete': function(settings, json) {
                   if ($('.dataTables_paginate .paginate_button').not('.previous, .next').length < 2 ) {
                       $('.dataTables_paginate').hide();
                   }
               },
               'lengthChange': false,
               'order': [[0, 'desc']],
               'pageLength': rowsPage,
               'responsive': {
                   'details': false
               },
               'searching': false,
               'stateSave': true
           });

           // Hacer clickable la fila de una tabla en mobile para descargar PDF
           if ($(window).width() < 768) {
               $('.tab-pane.active .table tbody').off().on('click', 'tr', function() {
                   const href = $(this).find('.btn-download').attr('href');
                   download(href);
               });
           }
       }

       
       <!-- Acciones del menu callMisFacturasMenu -->
       
       $('#btnMisFacturasMenu').on('click', function() {
          //no hacemos nada, no permitir llamarse a sí mismo
       });        
              	

       
       $('#formBillsEntitySelect #billsFiscalEntitySelect').on('change', function() {
	        const value = $(this).children(':selected').attr('value');
	
	        if (value === "-1") {
	        	
	        	$('#formBillsEntitySelect').attr('action', '/pclie/web/op.htm?operation=pclie.flow.ri.misFacturas');
	        	$('#formBillsEntitySelect').trigger('submit');
	        }
		});
	</script>

</div>
	









  <footer class="footer footer__home">
        <div class="footer__container">
            <div class="footer__links">
                <ul class="footer__links-container">
                    <li>
                        <a href="/pclie/web/op.htm?operation=pclie.flow.ri.preguntasFrecuentes&amp;fwk.locale=es_ES" target="_blank">Preguntas frecuentes</a>
                    </li>
                    <li>
                        <a target="_blank" href="/pclie/web/op.htm?operation=pclie.flow.ri.avisoLegal&amp;fwk.locale=es_ES">Aviso legal</a>
                    </li>
                    <li>
                        <a target="_blank" href="/pclie/web/op.htm?operation=pclie.flow.ri.cookies&amp;fwk.locale=es_ES">Política de cookies</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://info.mercadona.es/es/accesibilidad">Accesibilidad</a>
                    </li>
                </ul>
                <div class="footer__block ms-auto">
                    <div class="o-footer-phone">
						<div class="o-footer-support"></div>
						<div>800 500 220</div>
					</div>
                </div>
            </div>
            <div class="footer__fluid">
                <p class="footer__copyright">© Mercadona S.A. A46103834. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

	

<script src="/pclie/js/validate-forms.js"></script>
<script src="/pclie/js/main.js?v=1.4"></script>


<script type="text/javascript" src="/R4aG0LKixYwTlNp2pONE/Ok5G2LQ0wfcJLuL1/TgxyDCYfAw/DVIS/bURLc1A"></script>

<script type="text/javascript">
page.renderControls('p::p',["__menubar"]);
fwk.doAfterPage();
</script><script type="text/javascript">page.validatorKeys([]);</script><script type="text/javascript">
page.scriptEnd();
</script>
</body></html>